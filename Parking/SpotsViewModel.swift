import SwiftUI@MainActorfinal class SpotsViewModel: ObservableObject {    @Published var spots: [ParkingSpot] = []    @Published var isLoading = false    @Published var errorMessage: String?    func load() async {        // Avoid double-load        if isLoading { return }        isLoading = true        errorMessage = nil        do {            let lots = try await ParkingAPI.shared.fetchLots()            let spaces = try await ParkingAPI.shared.fetchSpaces()            let lotById = Dictionary(uniqueKeysWithValues: lots.map { ($0.id, $0) })            let mapped: [ParkingSpot] = spaces.compactMap { space in                guard let lot = lotById[space.lotId] else { return nil }                return ParkingSpot(space: space, lot: lot)            }            spots = mapped        } catch {            print("Error loading spots:", error)            errorMessage = "Failed to load parking data."        }        isLoading = false    }    var freeSpotsCount: Int {        spots.filter { $0.status == .free }.count    }    var occupiedSpotsCount: Int {        spots.filter { $0.status == .occupied }.count    }}